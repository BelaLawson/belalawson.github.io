<!-- development version, includes helpful console warnings -->
<!--<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>

<div id="app">
    <div id="flex">
        <img id="img1" class="img" src="https://picsum.photos/400/800">
        <img id="img2" class="img" src="https://picsum.photos/400/800">
        <img id="img3" class="img" src="https://picsum.photos/400/800">
        <img id="img4" class="img" src="https://picsum.photos/400/800">
        <div id="container"></div>

        <script type="module">

            var container;

            var camera, scene, renderer;

            var mouseX = 0, mouseY = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            init();
            animate();

            function init() {

                container = document.getElementById( 'container' );

                camera = new THREE.PerspectiveCamera( 20, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.z = 1800;

                scene = new THREE.Scene();
                scene.background = new THREE.Color( 0xffffff );

                var light = new THREE.DirectionalLight( 0xffffff );
                light.position.set( 0, 0, 1 );
                scene.add( light );

                var light2 = new THREE.DirectionalLight( 0xffffff );
                light.position.set( -3, 0, 30 );
                scene.add( light2 );

                var light3 = new THREE.DirectionalLight( 0xffffff );
                light3.position.set( 0, -8, -2 );
                scene.add( light3 );

                // shadow

                // var canvas = document.createElement( 'canvas' );
                // canvas.width = 128;
                // canvas.height = 128;
                //
                // var context = canvas.getContext( '2d' );
                // var gradient = context.createRadialGradient( canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2 );
                // gradient.addColorStop( 0.1, 'rgba(10,180,210,1)' );
                // gradient.addColorStop( 1, 'rgba(55,155,255,1)' );
                //
                // context.fillStyle = gradient;
                // context.fillRect( 0, 0, canvas.width, canvas.height );

                // var shadowTexture = new THREE.CanvasTexture( canvas );
                //
                // var shadowMaterial = new THREE.MeshBasicMaterial( { map: shadowTexture } );
                // var shadowGeo = new THREE.PlaneBufferGeometry( 300, 300, 1, 1 );
                //
                // var shadowMesh;
                //
                // shadowMesh = new THREE.Mesh( shadowGeo, shadowMaterial );
                // shadowMesh.position.y = - 250;
                // shadowMesh.rotation.x = - Math.PI / 2;
                // scene.add( shadowMesh );
                //
                // shadowMesh = new THREE.Mesh( shadowGeo, shadowMaterial );
                // shadowMesh.position.y = - 250;
                // shadowMesh.position.x = - 400;
                // shadowMesh.rotation.x = - Math.PI / 2;
                // scene.add( shadowMesh );
                //
                // shadowMesh = new THREE.Mesh( shadowGeo, shadowMaterial );
                // shadowMesh.position.y = - 250;
                // shadowMesh.position.x = 400;
                // shadowMesh.rotation.x = - Math.PI / 2;
                // scene.add( shadowMesh );

                var radius = 300;

                var geometry1 = new THREE.IcosahedronBufferGeometry( radius, 1 );

                var count = geometry1.attributes.position.count;
                geometry1.setAttribute( 'color', new THREE.BufferAttribute( new Float32Array( count * 3 ), 3 ) );

                var geometry2 = geometry1.clone();
                var geometry3 = geometry1.clone();

                var color = new THREE.Color();
                var positions1 = geometry1.attributes.position;
                var positions2 = geometry2.attributes.position;
                var positions3 = geometry3.attributes.position;
                var colors1 = geometry1.attributes.color;
                var colors2 = geometry2.attributes.color;
                var colors3 = geometry3.attributes.color;

                for ( var i = 0; i < count; i ++ ) {

                    color.setHSL( ( positions1.getY( i ) / radius + 1 ) / 2, 0.1, 1.0 );
                    colors1.setXYZ( i, color.r, color.g, color.b );

                    color.setHSL( 0, ( positions2.getY( i ) / radius + 1 ) / 0.2, 1.5 );
                    colors2.setXYZ( i, color.r, color.g, color.b );

                    color.setRGB( .1 , 1.651 - ( positions3.getX( i ) / radius + 1 ), 10 - ( positions3.getY( i ) / radius + 1 ) / 0.341 );
                    colors3.setXYZ( i, color.r, color.g, color.b );

                }

                var texture = new THREE.TextureLoader().load( 'https://picsum.photos/1000' );

                var material = new THREE.MeshPhongMaterial( {
                    color: 0xffffff,
                    alphaMap: texture,
                    flatShading: true,
                    vertexColors: THREE.VertexColors,
                    shininess: 10,
                    combine: 1
                } );

                var wireframeMaterial = new THREE.MeshBasicMaterial( { color: 0x000000, wireframe: true, transparent: true } );

                var mesh = new THREE.Mesh( geometry1, material );
                var wireframe = new THREE.Mesh( geometry1, wireframeMaterial );
                mesh.add( wireframe );
                mesh.position.x = - 400;
                mesh.rotation.x = - 3.87;
                //scene.add( mesh );

                var mesh = new THREE.Mesh( geometry2, material );
                var wireframe = new THREE.Mesh( geometry2, wireframeMaterial );
                mesh.add( wireframe );
                mesh.position.x = 400;
                //scene.add( mesh );

                var mesh = new THREE.Mesh( geometry3, material );
                var wireframe = new THREE.Mesh( geometry3, wireframeMaterial );
                mesh.add( wireframe );
                scene.add( mesh );

                renderer = new THREE.WebGLRenderer( { antialias: true , alpha: true } );
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );
                renderer.setClearColor( 0xffffff, 0 );
                container.appendChild( renderer.domElement );


                document.addEventListener( 'mousemove', onDocumentMouseMove, false );

                //

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function onDocumentMouseMove( event ) {

                mouseX = ( (event.clientX * 1.2) - windowHalfX );
                mouseY = ( (event.clientY * 4) - windowHalfY );

            }

            //

            function animate() {

                requestAnimationFrame( animate );

                render();

            }

            function render() {

                camera.position.x += ( mouseX - camera.position.x ) * 0.3;
                camera.position.y += ( mouseY - camera.position.y ) * 0.3;

                camera.lookAt( scene.position );

                renderer.render( scene, camera );

            }

        </script>
    </div>
</div>


<!--<script>-->
<!--    var app = new Vue({-->
<!--        el: '#app',-->
<!--        data: {-->
<!--            -->
<!--        },-->
<!--        methods: {-->

<!--        },-->
<!--        created: function() {-->

<!--        }-->
<!--    })-->
<!--</script>-->

<style>
    * {
    box-sizing: border-box;
    }

    body {
    margin: 0;
        z-index: -3;
    }
    a {
        color: #08f;
    }
    #flex {
        margin: 0;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
    }
    #container {
        margin: 0;
        box-sizing: border-box;
        z-index: -1;
    }
    .img {
        mix-blend-mode: color-burn;
        position: absolute;
        z-index: 6;
        opacity: 20%;
    }
    #img1 {
        transform: scale(-4) translateX(-10px) translateY(10px);
    }
    #img2 {
        transform: scale(-3) translateX(-480px) translateY(60px);
    }
    #img3 {
        transform: scale(-6) translateX(-30px) translateY(5px);
    }
    #img4 {
        transform: scale(-5) translateX(-280px) translateY(40px);
    }
</style>